{{template "layout" .}}

{{define "content"}}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>Issues for {{.Repo}}</h1>
        <a href="/ui/" class="btn btn-outline-secondary">Back to Runs</a>
    </div>

    {{if .Issues}}
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Severity</th>
                <th>Tool</th>
                <th>Rule ID</th>
                <th>Message</th>
                <th>Location</th>
                <th>Commit</th>
            </tr>
        </thead>
        <tbody>
            {{range .Issues}}
            <tr>
                <td>
                    <span class="badge {{if eq .Severity "error"}}bg-danger{{else if eq .Severity "warning"}}bg-warning text-dark{{else}}bg-info text-dark{{end}}">
                        {{.Severity}}
                    </span>
                </td>
                <td>{{.Tool}}</td>
                <td><code>{{.RuleID}}</code></td>
                <td>{{.Message}}</td>
                <td>{{.Path}}:{{.Line}}</td>
                <td>
                    <a href="/ui/run/{{.RunID}}">
                        {{if .CommitMessage}}{{.CommitMessage | subject}}{{else}}{{.RunID}}{{end}}
                    </a>
                </td>
            </tr>
            {{end}}
        </tbody>
    </table>
    {{else}}
    <p class="text-muted">No issues found.</p>
    {{end}}
</div>
{{end}}
